import unittest
from easynewssavedsearchhandler import EasynewsSavedSearchHandler

handler = EasynewsSavedSearchHandler()

class EasynewsSavedSearchHandlerTestCase(unittest.TestCase):

    def test_multiple_saved_searches(self):
        response = '<div class="Links"><a href="/">Main Members Page</a> | <a href="https://account.easynews.com/" target="EZaccount">Your Account</a> | <a href="/zipmanager.html" target="zipmanager">Zip Manager</a> | <a href="/preferences.html" target="EZprefs">Preferences</a> | <a href="/index.html?favorite=1">Favorites</a> | <a href="/savedSrch.html">Searches</a></div><div class="block"><h1>Saved Searches</h1><p>Your searches are stored on our servers.  You can view our privacy policy <a href="http://www.easynews.com/privacypolicy.html">here</a>.<br>The searches start running at approximately 11:30 GMT every night. <br>The searches check the last 24-hour period since the search ran last.<br>You will receive an Easynews Message if there are results for your search in that time frame.<br>If your search has over 5,000 results, you will not be able to enable it to be run nightly.<br></p></div><div class="block"><p>You can make saved searches using <a href="/global/">Global search</a>.<br>You can turn on email notification at the bottom of <a href="https://account.easynews.com/editinfo.php">your account profile settings</a>.<br>If you do not have an email listed in <a href="https://account.easynews.com/editinfo.php">your account settings</a>, and you have email notification turned on, you should visit that page and add one to receive the notifications.<br><br></p></div><div><form action="savedSrch.html" method="POST"><input type="hidden" name="process" value="1"><table class="centered savedSearches" width="100%"><tr><th>Num</th><th>Label</th><th>Delete</th><th>Run search</th><th>Last ran (GMT)</th><th>Hits</th><th colspan="3">URL</th></tr><tr><td align="center">1</td><td align="center"><input type="text" name="l0" value="Married At First Sight S16" style="width: 100%;"></td><td align="center"><input type="checkbox" name="d0_855947"></td><td align="center"><input type="radio" name="e0" value="1">Enabled <input type="radio" name="e0" value="0" checked>Disabled</td><td align="center">Jun 13, 2024 12:48:32 </td><td align="center">None</td><td align="center"><a target="gSearch" href="https://members.easynews.com/2.0/index/advanced?st=adv&amp;safeO=0&amp;sb=1&amp;gps=married+at+first+sight+s16+megusta+1080&amp;sbj=&amp;from=&amp;ns=&amp;fil=&amp;fex=&amp;vc=&amp;ac=&amp;s1=dtime&amp;s1d=-&amp;s2=nrfile&amp;s2d=-&amp;s3=dsize&amp;s3d=-&amp;fty%5B%5D=VIDEO&amp;spamf=1&amp;u=1&amp;hInfo=1&amp;pby=500&amp;pno=1&amp;sS=3&amp;d1=&amp;d1t=&amp;d2=&amp;d2t=&amp;b1=&amp;b1t=&amp;b2=&amp;b2t=&amp;px1=&amp;px1t=&amp;px2=&amp;px2t=&amp;fps1=&amp;fps1t=&amp;fps2=&amp;fps2t=&amp;bps1=&amp;bps1t=&amp;bps2=&amp;bps2t=&amp;hz1=&amp;hz1t=&amp;hz2=&amp;hz2t=&amp;rn1=&amp;rn1t=&amp;rn2=&amp;rn2t=&amp;go=Search&amp;sb=1">2.0</a></td><td align="center"><a target="gSearch" href="https://members.easynews.com/global5/index.html?st=adv&amp;safeO=0&amp;sb=1&amp;gps=married+at+first+sight+s16+megusta+1080&amp;sbj=&amp;from=&amp;ns=&amp;fil=&amp;fex=&amp;vc=&amp;ac=&amp;s1=dtime&amp;s1d=-&amp;s2=nrfile&amp;s2d=-&amp;s3=dsize&amp;s3d=-&amp;fty%5B%5D=VIDEO&amp;spamf=1&amp;u=1&amp;hInfo=1&amp;pby=500&amp;pno=1&amp;sS=3&amp;d1=&amp;d1t=&amp;d2=&amp;d2t=&amp;b1=&amp;b1t=&amp;b2=&amp;b2t=&amp;px1=&amp;px1t=&amp;px2=&amp;px2t=&amp;fps1=&amp;fps1t=&amp;fps2=&amp;fps2t=&amp;bps1=&amp;bps1t=&amp;bps2=&amp;bps2t=&amp;hz1=&amp;hz1t=&amp;hz2=&amp;hz2t=&amp;rn1=&amp;rn1t=&amp;rn2=&amp;rn2t=&amp;go=Search&amp;sb=1">Global5</a></td><td align="center"><a target="gSearch" href="https://members.easynews.com/global4/search.html?st=adv&amp;safeO=0&amp;sb=1&amp;gps=married+at+first+sight+s16+megusta+1080&amp;sbj=&amp;from=&amp;ns=&amp;fil=&amp;fex=&amp;vc=&amp;ac=&amp;s1=dtime&amp;s1d=-&amp;s2=nrfile&amp;s2d=-&amp;s3=dsize&amp;s3d=-&amp;fty%5B%5D=VIDEO&amp;spamf=1&amp;u=1&amp;hInfo=1&amp;pby=500&amp;pno=1&amp;sS=3&amp;d1=&amp;d1t=&amp;d2=&amp;d2t=&amp;b1=&amp;b1t=&amp;b2=&amp;b2t=&amp;px1=&amp;px1t=&amp;px2=&amp;px2t=&amp;fps1=&amp;fps1t=&amp;fps2=&amp;fps2t=&amp;bps1=&amp;bps1t=&amp;bps2=&amp;bps2t=&amp;hz1=&amp;hz1t=&amp;hz2=&amp;hz2t=&amp;rn1=&amp;rn1t=&amp;rn2=&amp;rn2t=&amp;go=Search&amp;sb=1">Global4</a></td></tr><tr><td align="center">2</td><td align="center"><input type="text" name="l1" value="married at first sight s17" style="width: 100%;"></td><td align="center"><input type="checkbox" name="d1_855951"></td><td align="center"><input type="radio" name="e1" value="1">Enabled <input type="radio" name="e1" value="0" checked>Disabled</td><td align="center">Jun 13, 2024 12:48:32 </td><td align="center">None</td><td align="center"><a target="gSearch" href="https://members.easynews.com/2.0/index/advanced?st=adv&amp;safeO=0&amp;sb=1&amp;gps=married+at+first+sight+s17+megusta+1080&amp;sbj=&amp;from=&amp;ns=&amp;fil=&amp;fex=&amp;vc=&amp;ac=&amp;s1=dtime&amp;s1d=-&amp;s2=nrfile&amp;s2d=-&amp;s3=dsize&amp;s3d=-&amp;fty%5B%5D=VIDEO&amp;spamf=1&amp;u=1&amp;hInfo=1&amp;pby=500&amp;pno=1&amp;sS=3&amp;d1=&amp;d1t=&amp;d2=&amp;d2t=&amp;b1=&amp;b1t=&amp;b2=&amp;b2t=&amp;px1=&amp;px1t=&amp;px2=&amp;px2t=&amp;fps1=&amp;fps1t=&amp;fps2=&amp;fps2t=&amp;bps1=&amp;bps1t=&amp;bps2=&amp;bps2t=&amp;hz1=&amp;hz1t=&amp;hz2=&amp;hz2t=&amp;rn1=&amp;rn1t=&amp;rn2=&amp;rn2t=&amp;go=Search&amp;sb=1">2.0</a></td><td align="center"><a target="gSearch" href="https://members.easynews.com/global5/index.html?st=adv&amp;safeO=0&amp;sb=1&amp;gps=married+at+first+sight+s17+megusta+1080&amp;sbj=&amp;from=&amp;ns=&amp;fil=&amp;fex=&amp;vc=&amp;ac=&amp;s1=dtime&amp;s1d=-&amp;s2=nrfile&amp;s2d=-&amp;s3=dsize&amp;s3d=-&amp;fty%5B%5D=VIDEO&amp;spamf=1&amp;u=1&amp;hInfo=1&amp;pby=500&amp;pno=1&amp;sS=3&amp;d1=&amp;d1t=&amp;d2=&amp;d2t=&amp;b1=&amp;b1t=&amp;b2=&amp;b2t=&amp;px1=&amp;px1t=&amp;px2=&amp;px2t=&amp;fps1=&amp;fps1t=&amp;fps2=&amp;fps2t=&amp;bps1=&amp;bps1t=&amp;bps2=&amp;bps2t=&amp;hz1=&amp;hz1t=&amp;hz2=&amp;hz2t=&amp;rn1=&amp;rn1t=&amp;rn2=&amp;rn2t=&amp;go=Search&amp;sb=1">Global5</a></td><td align="center"><a target="gSearch" href="https://members.easynews.com/global4/search.html?st=adv&amp;safeO=0&amp;sb=1&amp;gps=married+at+first+sight+s17+megusta+1080&amp;sbj=&amp;from=&amp;ns=&amp;fil=&amp;fex=&amp;vc=&amp;ac=&amp;s1=dtime&amp;s1d=-&amp;s2=nrfile&amp;s2d=-&amp;s3=dsize&amp;s3d=-&amp;fty%5B%5D=VIDEO&amp;spamf=1&amp;u=1&amp;hInfo=1&amp;pby=500&amp;pno=1&amp;sS=3&amp;d1=&amp;d1t=&amp;d2=&amp;d2t=&amp;b1=&amp;b1t=&amp;b2=&amp;b2t=&amp;px1=&amp;px1t=&amp;px2=&amp;px2t=&amp;fps1=&amp;fps1t=&amp;fps2=&amp;fps2t=&amp;bps1=&amp;bps1t=&amp;bps2=&amp;bps2t=&amp;hz1=&amp;hz1t=&amp;hz2=&amp;hz2t=&amp;rn1=&amp;rn1t=&amp;rn2=&amp;rn2t=&amp;go=Search&amp;sb=1">Global4</a></td></tr><tr><td colspan="2" align="left"><strong>Max:50</strong></td><td colspan="7" align="right"><input type="submit" name="godoit" value="Apply Changes"></td></tr></table></form></div>   </div>'
        count = handler.parse_saved_searches("EasynewsSavedSearchHandler", response)
        self.assertEqual(2, count)

if __name__ == '__main__':
    unittest.main()
